<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Funding Opportunities - Erudyte Commons</title>
    <meta name="description" content="Erudyte Commons">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Favicon and Touch Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="/assets/favicon/site.webmanifest">
    <link rel="mask-icon" href="/assets/favicon/safari-pinned-tab.svg" color="#6366f1">
    <link rel="shortcut icon" href="/assets/favicon/favicon.ico">
    <meta name="msapplication-TileColor" content="#080032">
    <meta name="msapplication-config" content="/assets/favicon/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <!-- CSS Files -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" media="screen" href="/assets/vendor/boxicons/css/boxicons.min.css"/>
    <link rel="stylesheet" media="screen" href="/assets/css/post-theme.css">

    <!-- Custom Styles -->
    <style>
      /* Page Loading Styles */
      .page-loading {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        width: 100%;
        height: 100%;
        -webkit-transition: all .4s .2s ease-in-out;
        transition: all .4s .2s ease-in-out;
        background-color: #fff;
        opacity: 0;
        visibility: hidden;
        z-index: 9999;
      }
      .dark-mode .page-loading {
        background-color: #0b0f19;
      }
      .page-loading.active {
        opacity: 1;
        visibility: visible;
      }
      .page-loading-inner {
        position: absolute;
        top: 50%;
        left: 0;
        width: 100%;
        text-align: center;
        -webkit-transform: translateY(-50%);
        transform: translateY(-50%);
        -webkit-transition: opacity .2s ease-in-out;
        transition: opacity .2s ease-in-out;
        opacity: 0;
      }
      .page-loading.active > .page-loading-inner {
        opacity: 1;
      }
      .page-loading-inner > span {
        display: block;
        font-size: 1rem;
        font-weight: normal;
        color: #9397ad;
      }
      .dark-mode .page-loading-inner > span {
        color: #fff;
        opacity: .6;
      }
      .page-spinner {
        display: inline-block;
        width: 2.75rem;
        height: 2.75rem;
        margin-bottom: .75rem;
        vertical-align: text-bottom;
        border: .15em solid #b4b7c9;
        border-right-color: transparent;
        border-radius: 50%;
        -webkit-animation: spinner .75s linear infinite;
        animation: spinner .75s linear infinite;
      }
      .dark-mode .page-spinner {
        border-color: rgba(255,255,255,.4);
        border-right-color: transparent;
      }
      @keyframes spinner {
        100% {
          transform: rotate(360deg);
        }
      }

      /* Funding Card Styles */
      .funding-card {
        height: 100%;
        transition: transform 0.2s;
        border: none;
        background: #fff;
        box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.08) !important;
      }
      .funding-card:hover {
        transform: translateY(-5px);
      }
      .funding-summary {
        min-height: 80px;
        color: #6c757d !important;
        line-height: 1.6;
      }
      .funding-card .btn-primary {
        background-color: #6366f1;
        border-color: #6366f1;
        padding: 0.75rem 1.5rem;
      }
      .funding-card .btn-primary:hover {
        background-color: #4044ee;
        border-color: #4044ee;
      }
    </style>
  </head>
  <body>
    <!-- Page loading spinner -->
    <div class="page-loading active">
      <div class="page-loading-inner">
        <div class="page-spinner"></div>
        <span>Loading...</span>
      </div>
    </div>

    <!-- Page wrapper -->
    <main class="page-wrapper">
      <!-- Navbar -->
      <%- include('navbar') %>

      <!-- Main content -->
      <div class="container py-5">
        <h1 class="display-5 fw-bold mb-4">Funding Opportunities</h1>
        <div class="row g-4">
          <% opportunities.forEach(function(opportunity) { %>
            <div class="col-md-4">
              <div class="card funding-card">
                <div class="card-body p-4">
                  <h5 class="card-title h4 fw-bold mb-3"><%= opportunity.title %></h5>
                  <p class="card-text funding-summary"><%= opportunity.summary %></p>
                  <a href="/funding/<%= opportunity.id %>" class="btn btn-primary w-100">View Details</a>
                </div>
              </div>
            </div>
          <% }); %>
        </div>
        
        <!-- Pagination -->
        <% if (totalPages > 1) { %>
          <nav class="mt-5" aria-label="Page navigation">
            <ul class="pagination justify-content-center">
              <% for(let i = 1; i <= totalPages; i++) { %>
                <li class="page-item <%= currentPage == i ? 'active' : '' %>">
                  <a class="page-link" href="/funding?page=<%= i %>"><%= i %></a>
                </li>
              <% } %>
            </ul>
          </nav>
        <% } %>
      </div>
    </main>

    <!-- Back to top button -->
    <a href="#top" class="btn-scroll-top" data-scroll>
      <span class="btn-scroll-top-tooltip text-muted fs-sm me-2">Top</span>
      <i class="btn-scroll-top-icon bx bx-chevron-up"></i>
    </a>

    <!-- Scripts -->
    <script src="/assets/vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/vendor/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>
    <script src="/assets/js/theme.min.js"></script>
  </body>
</html>
